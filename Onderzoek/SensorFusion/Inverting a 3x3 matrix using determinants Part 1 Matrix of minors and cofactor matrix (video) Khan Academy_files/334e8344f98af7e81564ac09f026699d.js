(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["334e8344f98af7e81564ac09f026699d"],{"/BnC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=[{username:"testadmin",password:"khan1",bio:"has all permissions and capabilities"},{username:"testchild",password:"khan1",bio:"a spawned child of testcoach"},{username:"testcoach",password:"khan1",bio:"a google-user coach of teststudent and testchild"},{username:"testcreator",password:"khan1",bio:"has creator capabilities"},{username:"testcurator",password:"khan1",bio:"has curator capabilities"},{username:"testmaybestudent",password:"khan1",bio:"a user testcoach requested to coach"},{username:"testmoderator",password:"khan1",bio:"has moderator permissions; coaches testcoach/teststudent"},{username:"testnweasupporter",password:"khan1",bio:"has the permissions of nwea support staff"},{username:"testpublisher",password:"khan1",bio:"has curator and publish capabilities"},{username:"testspanishcurator",password:"khan1",bio:"has curator capabilities for es only"},{username:"teststudent",password:"khan1",bio:"a spawned coachee of testcoach"},{username:"teststudent2",password:"khan1",bio:"a non-spawned coachee testcoach and teststudent"},{username:"testunverified",password:"khan1",bio:'an unverified user with the "resend email" banner notification'},{username:"testunverified2",password:"khan1",bio:'an unverified user with the "change email" banner notification'}];t.default=n},"9x/I":function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");var c=s(r("wd/R"));var p=r("mR6N");var v=o(r("q1tI"));var f=s(r("ZpD3"));var m=s(r("etw9"));var n=o(r("6OHE"));var d=s(r("Q8Wn"));var a=s(r("wF1t"));var h=s(r("HYhL"));var i=s(r("mkzS"));var b=s(r("Yq32"));var g=s(r("m+8x"));var y=s(r("YmN9"));var w=s(r("Bf4f"));var E=s(r("3sfC"));var O=s(r("bMB9"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function S(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function k(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return j(e)}function P(e){P=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return P(e)}function j(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)F(e,t)}function F(e,t){F=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return F(e,t)}function I(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var N=i18n._("Please select a valid birthdate.");var B=function e(t,r){var n=c.default.utc().subtract(13,"years");return c.default.utc(t,"YYYY-MM-DD")>n&&r==="learner"};var D=function(e){C(i,e);function i(){var e;var a;u(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=k(this,(e=P(i)).call.apply(e,[this].concat(r)));I(j(a),"state",{birthdate:a.props.birthdate||"",birthdateError:"",birthdateFieldInFocus:false});I(j(a),"updateBirthdateFromDateInput",function(e){a.setState({birthdate:e.target.value,birthdateError:""})});I(j(a),"validateBirthdateFromDateInput",function(e){var t=e.target.value;var r=t&&(0,c.default)(t,"YYYY-MM-DD");if(r&&r.isAfter()){a.setState({birthdateError:N})}});I(j(a),"updateBirthdateFromDatepicker",function(e){if(e){if(e.isAfter()){a.setState({birthdateError:N})}else{var t=e.locale("en").format("YYYY-MM-DD");a.setState({birthdate:t,birthdateError:""})}}});I(j(a),"handleEmailClick",function(e){var t=a.props.role;var r=a.state.birthdate;var n=B(r,t);f.default.markMinorConversions([{id:"signup_email_button_clicked"}]);a.props.onBirthdateChange(r,n);a.props.updateStep("identify")});return a}S(i,[{key:"componentDidUpdate",value:function e(t,r){var n=r.birthdate!==this.state.birthdate;if(n&&!this.state.birthdateError){f.default.markMinorConversions([{id:"signup_birthdate_filled",extra:{isIOS:d.default.isIOS}}])}}},{key:"showSignupButtons",value:function e(){if(this.props.role!=="learner"){return true}return!!(this.state.birthdate&&!this.state.birthdateError)}},{key:"setBirthdateFieldInFocus",value:function e(t){if(t){f.default.markMinorConversions([{id:"signup_birthdate_focused",extra:{isIOS:d.default.isIOS}}])}this.setState({birthdateFieldInFocus:t})}},{key:"maybeRenderSignupButtons",value:function e(){var t=this.props,r=t.continueUrl,n=t.googleContinueUrl,a=t.role,i=t.classCodes,o=t.showFacebookButton,s=t.flag,u=t.flagLoading;var l=this.state.birthdate;var c=B(l,a);var f=!u&&s&&a==="teacher";if(!this.showSignupButtons()){return null}var d=c&&!i;return v.createElement("div",{className:(0,p.css)(M.buttons)},!d&&v.createElement("div",{className:(0,p.css)(E.default.signupButtonWrapper)},v.createElement(y.default,{width:"100%",size:"large",role:a,googleContinueUrl:n,postLoginContinueUrl:r,minorConversions:[{id:"signup_google_button_clicked"}],classCodes:i,birthdate:l})),f&&v.createElement("div",{className:(0,p.css)(E.default.signupButtonWrapper)},v.createElement(O.default,{width:"100%",size:"large",isLogin:false})),!c&&o&&v.createElement("div",{className:(0,p.css)(E.default.signupButtonWrapper)},v.createElement(g.default,{width:"100%",size:"large",role:a,postLoginContinueUrl:r,minorConversions:[{id:"signup_facebook_button_clicked"}],classCodes:i})),!c&&v.createElement("div",{className:(0,p.css)(E.default.signupButtonWrapper)},v.createElement(b.default,{width:"100%",size:"large",role:a,postLoginContinueUrl:r,minorConversions:[{id:"signup_apple_button_clicked"}],classCodes:i})),v.createElement("div",{className:(0,p.css)(E.default.signupButtonWrapper)},v.createElement(m.default,{title:c?i18n._("Sign up by choosing a username"):i18n._("Sign up with Email"),testId:"sign-up-with-email-button",width:"100%",size:"large",iconComponent:c?null:w.default,onClick:this.handleEmailClick})))}},{key:"render",value:function e(){var r=this;var t=this.state,n=t.birthdate,a=t.birthdateError;var i=this.props.role;var o=!this.state.birthdateFieldInFocus&&a;var s=(0,c.default)();var u=(0,c.default)().subtract(120,"years");var l=d.default.isIOS?v.createElement("input",{type:"date",min:u.format("YYYY-MM-DD"),max:s.format("YYYY-MM_DD"),className:(0,p.css)(M.dateInput,o&&E.default.errorInput),value:n,onFocus:function e(t){return r.setBirthdateFieldInFocus(true)},onChange:function e(t){r.updateBirthdateFromDateInput(t);r.validateBirthdateFromDateInput(t)},onBlur:function e(t){r.setBirthdateFieldInFocus(false);r.validateBirthdateFromDateInput(t)}}):v.createElement("div",{className:(0,p.css)(a&&E.default.errorInput)},v.createElement(h.default,{appearance:"blue-mountain",defaultValue:this.state.birthdate,onChange:this.updateBirthdateFromDatepicker,onFocus:function e(t){f.default.markMinorConversions([{id:"signup_birthdate_focused",extra:{isIOS:d.default.isIOS}}])},reportNull:false,showTitles:true}));return v.createElement("div",null,v.createElement("div",{className:(0,p.css)(i==="learner"?M.birthdayPickerWrapper:M.invisibleBirthdayPickerWrapper)},v.createElement("div",{className:(0,p.css)(E.default.label)},v.createElement("div",{className:(0,p.css)(M.birthdayPickerPrompt)},i18n._("What is your date of birth?")),l,v.createElement("div",{className:(0,p.css)(E.default.fieldRequirement,a?E.default.fieldError:E.default.hiddenFieldError)},a))),this.maybeRenderSignupButtons())}}]);return i}(v.Component);I(D,"defaultProps",{under13:false,role:"learner",showFacebookButton:true});var R=40;var M=p.StyleSheet.create({birthdayPickerWrapper:{display:"block",marginBottom:8,height:95},invisibleBirthdayPickerWrapper:{height:0,opacity:0,visibility:"hidden",overflow:"hidden"},birthdayPickerPrompt:{marginBottom:4},dateInput:{height:R,fontSize:i.default.BODY_FONT_SIZE,border:"1px solid ".concat(n.default.colors.gray85),borderRadius:n.borderRadius,minWidth:"50%",outline:"none",":focus":{borderColor:n.default.colors.kaGreen}},buttons:{animationName:{from:{opacity:0},to:{opacity:1}},animationDuration:"500ms"},login:{marginTop:24,marginBottom:72,textAlign:"center",fontSize:i.default.BODY_FONT_SIZE,color:n.default.colors.kaGreen},link:{":hover":{textDecoration:"none",color:n.default.colors.kaGreenHover}}});e.exports=(0,a.default)({name:"districts_clever_library_active"})(D)},DvtR:function(e,t,r){"use strict";r("pNMO");r("yXV3");r("zKZe");r("5DmW");r("SYor");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=o(r("q1tI"));var a=i(r("WjuW"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return s.apply(this,arguments)}function u(e,t){if(e==null)return{};var r=l(e,t);var n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++){n=i[a];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function l(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var a,i;for(i=0;i<n.length;i++){a=n[i];if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var i18n=r("HEOz");var c=function e(t){if(t==="first"){return i18n._("First name")}if(t==="last"){return i18n._("Last name")}if(t==="full"){return i18n._("Your name")}return null};var f=function e(t){if(t==="first"){return i18n._("Please tell us your first name.")}if(t==="last"){return i18n._("Please tell us your last name.")}if(t==="full"){return i18n._("Please tell us your full name.")}return null};var d=function e(t){return function(e){return e.trim().length===0?f(t):null}};var p=function e(t){var _=t.nameType,r=u(t,["nameType"]);return n.createElement(a.default,s({emptyMessage:f(t.nameType),label:c(t.nameType),validator:d(t.nameType)},r))};t.default=p},QuFw:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("+2oP");r("5DmW");r("NBAS");r("UxlC");r("EnZy");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=P(r("q1tI"));var u=r("mR6N");var n=r("vwLt");var a=i(r("Nw73"));var o=i(r("Pwnf"));var l=i(r("SGU3"));var c=r("83y6");var f=i(r("Q8Wn"));var d=i(r("Yq32"));var p=i(r("m+8x"));var v=i(r("YmN9"));var m=i(r("S52b"));var h=i(r("JKja"));var b=i(r("3sfC"));var g=i(r("bMB9"));var y=i(r("IH/d"));var w=i(r("WjuW"));var E=i(r("SW+Y"));var O=i(r("RNI6"));var S=r("WGxL");var k=i(r("/BnC"));function i(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function j(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){L(t,e,r[e])})}return t}function C(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function I(e,t,r){if(t)F(e.prototype,t);if(r)F(e,r);return e}function N(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return D(e)}function B(e){B=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return B(e)}function D(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function R(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)M(e,t)}function M(e,t){M=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return M(e,t)}function L(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var W=r("ZpD3");var i18n=r("HEOz");var U={identifierMissing:i18n._("An email or username is required to log in. "+"You can also log in with Google or Facebook."),passwordMissing:i18n._("A password is required to log in.")};var x=function(e){R(i,e);function i(){var e;var a;C(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=N(this,(e=B(i)).call.apply(e,[this].concat(r)));L(D(a),"state",{credentials:{},serverError:null,isSubmitting:false});L(D(a),"handleSubmit",function(e){if(a.state.isSubmitting){return}e.preventDefault();var t=a.getCredentials();if(t){a.doLogin(t)}});L(D(a),"handleSignupClick",function(e){e.preventDefault();a.props.updateStep("intro")});L(D(a),"handleDevSubmit",function(e){var t=e.split(":");var r=t[0];var n=t.slice(1).join(":");a.doLogin({identifier:r,password:n})});return a}I(i,[{key:"doLogin",value:function e(t){var r=this;var n=this.props.classCodes;var a=this.state.isSubmitting;if(a){return}W.markMinorConversions([{id:"login_password_button_clicked"}]);var i=(0,S.getcontinueUrlFromQueryString)()||this.props.continueUrl||null;(0,S.login)({identifier:t.identifier,password:t.password,fkey:(0,c.getXSRFToken)(),continue:i}).then(function(e){window.top.location.replace((0,O.default)({type:"password",continueUrl:i,classCodes:n}))}).catch(function(e){var t=S.LOGIN_ERROR_STRINGS.GENERIC_ERROR;if(e&&e.errors){t=(0,S.getLoginErrorString)(e.errors);if(r.usernameInputField){r.usernameInputField.focus()}}r.setState({isSubmitting:false,serverError:t})});this.setState({isSubmitting:true})}},{key:"getCredentials",value:function e(){var t=this.state.credentials,r=t.identifier,n=t.password;if(r&&n){return{identifier:r,password:n}}return null}},{key:"renderOAuthButtons",value:function e(){var r=this;var t=this.props,n=t.classCodes,a=t.continueUrl,i=t.googleContinueUrl,o=t.role;return s.createElement("div",{className:(0,u.css)(Y.buttons)},s.createElement("div",{className:(0,u.css)(b.default.signupButtonWrapper)},s.createElement(v.default,{width:"100%",size:"large",role:o,googleContinueUrl:i,postLoginContinueUrl:a,classCodes:n,minorConversions:[{id:"login_google_button_clicked"}],onError:function e(t){r.setState({serverError:t})}})),s.createElement(y.default,null,s.createElement("div",{className:(0,u.css)(b.default.signupButtonWrapper)},s.createElement(g.default,{width:"100%",size:"large",isLogin:true,postLoginContinueUrl:a}))),s.createElement("div",{className:(0,u.css)(b.default.signupButtonWrapper)},s.createElement(p.default,{width:"100%",size:"large",role:o,postLoginContinueUrl:a,classCodes:n,minorConversions:[{id:"login_facebook_button_clicked"}],onError:function e(t){r.setState({serverError:t})}})),s.createElement("div",{className:(0,u.css)(b.default.signupButtonWrapper)},s.createElement(d.default,{size:"large",width:"100%",role:o,classCodes:n,postLoginContinueUrl:a,minorConversions:[{id:"login_apple_button_clicked"}],onError:function e(t){if(t&&t.error==="popup_blocked_by_browser"){r.setState({serverError:i18n._("Your browser blocked a popup window required for logging in. Please change your browser settings to allow popups from khanacademy.org.")})}else{r.setState({serverError:i18n._("Error logging in. Please try again.")})}}})))}},{key:"maybeRenderDevUsers",value:function e(){if(!f.default.IS_DEV_SERVER){return null}var t=k.default.map(function(e){return s.createElement(n.OptionItem,{key:e.username,label:"".concat(e.username,": ").concat(e.bio),value:"".concat(e.username,":").concat(e.password)})});return s.createElement("div",null,s.createElement(n.SingleSelect,{onChange:this.handleDevSubmit,placeholder:"OR log in as an existing user:"},t))}},{key:"renderLoginButtonText",value:function e(){var t=this.state.isSubmitting;return t?i18n._("Logging you in..."):i18n._("Log in")}},{key:"renderLoginForm",value:function e(){var n=this;var t=this.state.serverError;return s.createElement(s.Fragment,null,s.createElement("div",{role:"alert",className:(0,u.css)(b.default.fieldRequirement,Y.serverError,b.default.fieldError)},t),s.createElement(w.default,{testId:"identifier",label:i18n._("Email or username"),emptyMessage:U.identifierMissing,onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:j({},n.state.credentials,{identifier:t?r:null})})},innerRef:function e(t){return n.usernameInputField=t}}),s.createElement(E.default,{testId:"password",emptyMessage:U.passwordMissing,label:i18n._("Password"),onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:j({},n.state.credentials,{password:t?r:null})})}}),s.createElement(l.default,{href:"/forgotpw"},i18n._("Forgot password?")),s.createElement(a.default,{width:"100%",size:"large",color:o.default.blue,onClick:this.handleSubmit,disabled:!this.getCredentials(),testId:"log-in-submit-button"},this.renderLoginButtonText()))}},{key:"renderSignupButton",value:function e(){return s.createElement("div",{className:(0,u.css)(Y.signup)},s.createElement(l.default,{href:"/signup",onClick:this.handleSignupClick},i18n._("Create an account")))}},{key:"render",value:function e(){var t=this.props,r=t.previousStep,n=t.updateStep;return s.createElement(h.default,{showBackButton:!!r,onBackClick:r&&function(){return n(r)}},this.renderOAuthButtons(),s.createElement(m.default,{classCodes:this.props.classCodes,continueUrl:this.props.continueUrl,serverError:this.state.serverError}),this.renderSignupButton())}}]);return i}(s.Component);L(x,"defaultProps",{role:"learner"});var Y=u.StyleSheet.create({buttons:{marginBottom:40},serverError:{minHeight:24,lineHeight:"24px"},signup:{marginTop:24,marginBottom:72,textAlign:"center"}});var T=x;t.default=T},S52b:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("+2oP");r("5DmW");r("NBAS");r("UxlC");r("EnZy");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=P(r("q1tI"));var n=r("Pk2J");var o=r("mR6N");var s=r("vwLt");var u=k(r("Nw73"));var l=k(r("Pwnf"));var c=k(r("SGU3"));var f=r("83y6");var d=k(r("Q8Wn"));var i=k(r("wF1t"));var p=k(r("4Du/"));var v=k(r("3sfC"));var m=k(r("WjuW"));var h=k(r("SW+Y"));var b=k(r("RNI6"));var g=r("WGxL");var y=r("x2Mf");var w=r("sPtk");var E=P(r("4PhQ"));var O=r("Y8R6");var S=k(r("/BnC"));function k(e){return e&&e.__esModule?e:{default:e}}function P(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function j(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){L(t,e,r[e])})}return t}function C(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function I(e,t,r){if(t)F(e.prototype,t);if(r)F(e,r);return e}function N(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return D(e)}function B(e){B=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return B(e)}function D(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function R(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)M(e,t)}function M(e,t){M=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return M(e,t)}function L(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var W={identifierMissing:i18n._("An email or username is required to log in. "+"You can also log in with Google or Facebook."),passwordMissing:i18n._("A password is required to log in.")};var U=function(e){R(i,e);function i(){var e;var a;C(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=N(this,(e=B(i)).call.apply(e,[this].concat(r)));L(D(a),"state",{credentials:{},serverError:a.props.serverError||null,isSubmitting:false});L(D(a),"doLoginNew",function(e){var t=a.props.classCodes;var r=a.state.isSubmitting;if(r){return}a.setState({isSubmitting:true});var n=(0,g.getcontinueUrlFromQueryString)()||a.props.continueUrl||null;(0,y.loginWithPassword)({identifier:e.identifier,password:e.password,signupCodes:t}).then(function(e){var t=(0,w.calculateNextUrl)({location:a.props.location,userData:e.user,loginType:"password",continueUrl:n||"/",isFirstLogin:e.isFirstLogin,joinClassrooms:e.joinClassrooms});(0,O.redirect)(t)}).catch(function(e){E.default.error(e,E.Errors.Internal);if(a.usernameInputField){a.usernameInputField.focus()}var t=(0,y.getErrorMessageByCode)(e.message);a.setState({isSubmitting:false,serverError:t})})});L(D(a),"handleDevSubmit",function(e){var t=e.split(":");var r=t[0];var n=t.slice(1).join(":");if(a.props.flag){a.doLoginNew({identifier:r,password:n});return}a.doLogin({identifier:r,password:n})});L(D(a),"handleSubmit",function(e){if(a.state.isSubmitting){return}e.preventDefault();var t=a.getCredentials();if(t){if(a.props.flag){a.doLoginNew(t);return}a.doLogin(t)}});return a}I(i,[{key:"componentDidUpdate",value:function e(t){if(t.serverError!==this.props.serverError){this.setState({serverError:this.props.serverError})}}},{key:"doLogin",value:function e(t){var r=this;var n=this.props.classCodes;var a=this.state.isSubmitting;if(a){return}this.setState({isSubmitting:true});var i=(0,g.getcontinueUrlFromQueryString)()||this.props.continueUrl||null;(0,g.login)({identifier:t.identifier,password:t.password,fkey:(0,f.getXSRFToken)(),continue:i}).then(function(e){window.top.location.replace((0,b.default)({type:"password",continueUrl:i,classCodes:n}))}).catch(function(e){var t=g.LOGIN_ERROR_STRINGS.GENERIC_ERROR;if(e&&e.errors){t=(0,g.getLoginErrorString)(e.errors);if(r.usernameInputField){r.usernameInputField.focus()}}r.setState({isSubmitting:false,serverError:t})})}},{key:"getCredentials",value:function e(){var t=this.state.credentials,r=t.identifier,n=t.password;if(r&&n){return{identifier:r,password:n}}return null}},{key:"renderLoginButtonText",value:function e(){var t=this.state.isSubmitting;return t?i18n._("Logging you in..."):i18n._("Log in")}},{key:"maybeRenderDevUsers",value:function e(){if(!d.default.IS_DEV_SERVER){return null}var t=S.default.map(function(e){return a.createElement(s.OptionItem,{key:e.username,label:"".concat(e.username,": ").concat(e.bio),value:"".concat(e.username,":").concat(e.password)})});return a.createElement("div",null,a.createElement(s.SingleSelect,{onChange:this.handleDevSubmit,placeholder:"OR log in as an existing user:"},t))}},{key:"renderLoginForm",value:function e(){var n=this;var t=this.state.serverError;return a.createElement(a.Fragment,null,a.createElement("div",{role:"alert",className:(0,o.css)(v.default.fieldRequirement,x.serverError,v.default.fieldError)},t),a.createElement(m.default,{testId:"identifier",label:i18n._("Email or username"),emptyMessage:W.identifierMissing,onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:j({},n.state.credentials,{identifier:t?r:null})})},innerRef:function e(t){return n.usernameInputField=t}}),a.createElement(h.default,{testId:"password",emptyMessage:W.passwordMissing,label:i18n._("Password"),onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:j({},n.state.credentials,{password:t?r:null})})}}),a.createElement(c.default,{href:"/forgotpw"},i18n._("Forgot password?")),a.createElement(u.default,{width:"100%",size:"large",color:l.default.blue,onClick:this.handleSubmit,disabled:!this.getCredentials(),testId:"log-in-submit-button"},this.renderLoginButtonText()))}},{key:"render",value:function e(){return a.createElement(a.Fragment,null,this.maybeRenderDevUsers(),this.renderLoginForm())}}]);return i}(a.Component);var x=o.StyleSheet.create({serverError:{minHeight:24,lineHeight:"24px"}});var Y=(0,n.compose)(p.default,(0,i.default)({name:"new_password_login"}))(U);t.default=Y},radk:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("07d7");r("JfAA");r("UxlC");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=s(r("q1tI"));var n=r("mR6N");var l=a(r("JKja"));var c=a(r("P6bW"));var i=a(r("DvtR"));var f=a(r("SW+Y"));var d=a(r("zdYe"));var o=a(r("RNI6"));var p=r("WGxL");function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function v(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){S(t,e,r[e])})}return t}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function b(e,t,r){if(t)h(e.prototype,t);if(r)h(e,r);return e}function g(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return w(e)}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return y(e)}function w(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)O(e,t)}function O(e,t){O=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return O(e,t)}function S(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var k=function e(t){var r=function e(t){return u.createElement("span",{dangerouslySetInnerHTML:{__html:t}})};var n={};for(var a=0,i=["username","email","password"];a<i.length;a++){var o=i[a];var s=o+"_html";if(t[o]){n[o]=t[o].toString()}if(t[s]){n[o]=r(t[s])}}return n};var P=function(e){E(a,e);function a(){var e;var i;m(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=g(this,(e=y(a)).call.apply(e,[this].concat(r)));S(w(i),"state",{fields:{},fieldErrors:{},isRedirecting:false,isSubmitting:false,serverError:false});S(w(i),"handleEmailSignupSuccess",function(e){var t=i.props,r=t.onEmailSignupSuccess,n=t.referral,a=t.classCodes;if(r){r()}window.top.location.replace((0,o.default)({type:"password",continueUrl:e,referral:n,classCodes:a}))});S(w(i),"handleBackClick",function(e){i.props.updateStep(i.props.previousStep)});S(w(i),"handleSubmit",function(e){e.preventDefault();i.submitForm()});S(w(i),"handleProceedClick",function(e){e.preventDefault();i.submitForm()});S(w(i),"validationHandler",function(n,a){return function(e,t){var r=e?t:null;i.setState({fields:v({},i.state.fields,n(r)),fieldErrors:v({},i.state.fieldErrors,a?a(r):{})})}});return i}b(a,[{key:"getSubmission",value:function e(){var t=this.state.fields,r=t.email,n=t.firstName,a=t.lastName,i=t.password,o=t.username;var s=this.props,u=s.under13,l=s.classCodes;if(!u&&r&&n&&a&&i){return{under13:u,fields:{email:r,firstName:n,lastName:a,password:i}}}if(u&&o&&i){if(l){return{fields:{username:o,password:i,email:""},under13:u}}if(r){return{fields:{username:o,password:i,email:r},under13:u}}}return null}},{key:"submitForm",value:function e(){var r=this;var t=this.getSubmission();if(t===null){return}var n=this.props,a=n.birthdate,i=n.role,o=n.referral,s=n.classCodes;var u=(0,p.getcontinueUrlFromQueryString)()||this.props.continueUrl||null;var l=s?s.join(","):"";var c={password:t.fields.password,classCodes:l,continue:u,birthdate:a,referral:o};var f=t.under13?(0,p.signupUnder13)(v({},c,{parent_email:t.fields.email,username:t.fields.username})):(0,p.signup)(v({},c,{email:t.fields.email,firstname:t.fields.firstName,lastname:t.fields.lastName,role:i}));f.then(function(e){r.handleEmailSignupSuccess(e.continueUrl);r.setState({isRedirecting:true})}).catch(function(e){if(e&&e.errors){var t=k(e.errors);if(Object.keys(t).length===0){r.setState({serverError:true})}r.setState({fieldErrors:t})}r.setState({isSubmitting:false})});this.setState({isSubmitting:true,serverError:false})}},{key:"renderNameFields",value:function e(){return u.createElement("div",{className:(0,n.css)(j.nameFields)},u.createElement("div",{className:(0,n.css)(j.nameFieldWrapper)},u.createElement(i.default,{testId:"signup-first-name-field",nameType:"first",onValidation:this.validationHandler(function(e){return{firstName:e}}),onSubmit:this.handleSubmit})),u.createElement("div",{className:(0,n.css)(j.nameFieldWrapper)},u.createElement(i.default,{testId:"signup-last-name-field",nameType:"last",onValidation:this.validationHandler(function(e){return{lastName:e}}),onSubmit:this.handleSubmit})))}},{key:"renderServerError",value:function e(){var t=this.state.serverError;return t&&i18n._("Sorry, we saw an unexpected error! Please try again later.")}},{key:"renderProceedButtonLabel",value:function e(){var t=this.state,r=t.isRedirecting,n=t.isSubmitting;if(r){return i18n._("Logging you in...")}if(n){return i18n._("Signing up...")}return i18n._("Sign up")}},{key:"renderEmailFieldLabel",value:function e(){var t=this.props.under13;if(t){return i18n._("Your parent or guardian's email")}return i18n._("Your email")}},{key:"renderEmailFieldNotice",value:function e(){var t=this.props.under13;if(t){return i18n._("We’re excited to get you started, but we need to notify your parent or guardian about your account.")}return null}},{key:"render",value:function e(){var t=this.props,r=t.under13,n=t.classCodes;var a=this.state,i=a.fieldErrors,o=a.isSubmitting;var s=r&&n;return u.createElement(l.default,{showBackButton:true,onBackClick:this.handleBackClick,showProceedButton:true,proceedLabel:this.renderProceedButtonLabel(),proceedDisabled:!this.getSubmission()||o,onProceedClick:this.handleProceedClick},!s&&u.createElement(c.default,{testId:"signup-email-field",label:this.renderEmailFieldLabel(),notice:this.renderEmailFieldNotice(),error:i.email,onValidation:this.validationHandler(function(e){return{email:e}},function(){return{email:null}}),onSubmit:this.handleSubmit}),r?u.createElement(d.default,{error:i.username,onValidation:this.validationHandler(function(e){return{username:e}},function(){return{username:null}}),onSubmit:this.handleSubmit}):this.renderNameFields(),u.createElement(f.default,{testId:"signup-password-field",isCreating:true,error:i.password,onValidation:this.validationHandler(function(e){return{password:e}},function(){return{password:null}}),onSubmit:this.handleSubmit}),this.renderServerError())}}]);return a}(u.Component);S(P,"defaultProps",{previousStep:"intro"});var j=n.StyleSheet.create({serverError:{marginTop:24,marginBottom:72},nameFields:{display:"flex",alignItems:"top"},nameFieldWrapper:{width:"50%",":first-of-type":{marginRight:4},":last-of-type":{marginLeft:4}}});var C=P;t.default=C},zdYe:function(e,t,r){"use strict";r("ma9I");r("zKZe");r("5DmW");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(r("q1tI"));var o=r("WGxL");var a=i(r("WjuW"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(){u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return u.apply(this,arguments)}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function d(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return v(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function v(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function b(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var g={label:i18n._("Choose a username"),notice:i18n._("Use letters and numbers only. For safety, don't use your real name."),placeholder:i18n._("Please choose a username.")};var y=function(e){m(i,e);function i(){var e;var n;l(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++){r[a]=arguments[a]}n=d(this,(e=p(i)).call.apply(e,[this].concat(r)));b(v(n),"state",{showValidationWhileFocused:false});b(v(n),"validate",function(e){return(0,o.isUsernameAvailable)(e).then(function(e){var t=e.result,r=e.reason;n.setState({showValidationWhileFocused:r===o.USERNAME_VALIDATION_STRINGS.UNAVAILABLE});return t?null:r})});return n}f(i,[{key:"render",value:function e(){var t=this.state.showValidationWhileFocused;var r=this.props.onValidation;return n.createElement(a.default,u({label:g.label,notice:g.notice},this.props,{emptyMessage:g.placeholder,maxLength:o.USERNAME_MAX_LENGTH,onValidation:r,showValidationWhileFocused:t,validator:this.validate}))}}]);return i}(n.Component);var w=y;t.default=w}}]);
//# sourceMappingURL=../../sourcemaps/en/334e8344f98af7e81564ac09f026699d.bef276b58e84e23c2108.js.map