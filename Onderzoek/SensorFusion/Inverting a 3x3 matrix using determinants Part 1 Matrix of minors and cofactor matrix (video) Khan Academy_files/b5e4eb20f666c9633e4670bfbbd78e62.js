(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["b5e4eb20f666c9633e4670bfbbd78e62"],{"0bMH":function(e,r,t){"use strict";t("pNMO");t("4Brf");t("ma9I");t("TeQF");t("2B1R");t("5DmW");t("FZtP");Object.defineProperty(r,"__esModule",{value:true});r.transformUserTask=r.transformUserExercise=void 0;function s(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){a(r,e,t[e])})}return r}function a(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var i=function e(r){return{exercise:r.exerciseName,exerciseModel:r.exercise,exerciseProgress:r.exerciseProgress,exerciseStates:{mastered:r.exerciseProgress.mastered,practiced:r.exerciseProgress.practiced},fpmMasteryLevel:r.fpmMasteryLevel,isSkillCheck:r.isSkillCheck,lastAttemptNumber:r.lastAttemptNumber,lastCountHints:r.lastCountHints,lastDone:r.lastDone,lastMasteryUpdate:r.lastMasteryUpdate,longestStreak:r.longestStreak,mastered:r.exerciseProgress.mastered,masteryPoints:r.masteryPoints,maximumExerciseProgress:r.maximumExerciseProgress,maximumExerciseProgressDt:r.maximumExerciseProgressDate,practiced:r.exerciseProgress.practiced,practicedDate:r.practicedDate,proficientDate:r.proficientDate,secondsPerFastProblem:r.secondsPerFastProblem,snoozeTime:r.snoozeTime,streak:r.streak,totalCorrect:r.totalCorrect,totalDone:r.totalDone}};r.transformUserExercise=i;var n=function e(r){var t=r.task;var n={cards:r.cards,description:t?t.description:null,includeSkipButton:r.includeSkipButton,taskJson:t,title:t?t.title:null,translatedDescription:t?t.translatedDescription:null,translatedTitle:t?t.translatedTitle:null,userExercises:r.userExercises.map(i)};if(r.__typename==="PracticeUserTask"){return s({},n,{includeOptOutButton:r.includeOptOutButton,includeWorkedExampleButton:r.includeWorkedExampleButton,practiceExercise:r.practiceExercise?i(r.practiceExercise):null,readOnly:r.readOnly})}return n};r.transformUserTask=n},Borw:function(e,r,t){"use strict";t("TeQF");t("+2oP");t("Rm1S");var u=t("4PhQ");var l=t("nA/X");var i18n=t("HEOz");function i(e){var r=0;for(var t=e.length-1;t>=0;t--){if(!e[t].correct){break}r+=1}return r}function n(e){var r=0;for(var t=0;t<e.length;t++){if(!e[t].correct){break}r+=1}return r}var o=i18n._("Awesome!");var s=/^num_problems_(\d+)$/;var a=/^num_correct_in_a_row_(\d+)$/;var c=/^first_x_or_num_correct_in_a_row_(\d+)_(\d+)$/;var d=/^x_of_the_last_y:(\d+):(\d+)$/;function f(e){var r;r=e.match(s);if(r){return{type:"num_problems",numRequired:+r[1]}}r=e.match(a);if(r){return{type:"num_correct_in_a_row",numRequired:+r[1]}}r=e.match(c);if(r){return{type:"first_x_or_num_correct_in_a_row",numRequired:+r[2],first:+r[1]}}r=e.match(d);if(r){return{type:"x_of_the_last_y",numRequired:+r[2],correct:+r[1]}}throw new u.KAError("Error parsing completion criteria: ".concat(e),u.Errors.Internal)}function m(e,r){switch(e.type){case"num_problems":return r.taskProgress.attemptHistory.length>=e.numRequired;case"num_correct_in_a_row":return i(r.taskProgress.attemptHistory)>=e.numRequired;case"first_x_or_num_correct_in_a_row":return n(r.taskProgress.attemptHistory)>=e.first||i(r.taskProgress.attemptHistory)>=e.numRequired;case"x_of_the_last_y":return r.taskProgress.attemptHistory.slice(-e.numRequired).filter(function(e){return e.correct}).length>=e.correct;default:throw new u.KAError("Error checking if criterion is satisfied; "+"unknown type ".concat(e.type),u.Errors.Internal)}}function p(e,r,t){if(!r){r=t?.5:.7}return Math.ceil(e*r)}function v(e,r){if(!m(e,r)){return false}switch(e.type){case"num_problems":{var t=r.taskInfo.promotionCriteria;if(r.taskInfo.taskType==="practice"){var n=r.taskInfo.exerciseDescriptors[r.taskProgress.exerciseDescriptorIndex];var s=r.taskProgress.progressByExercise[n].currentFpmLevel;var a=r.taskInfo.infoByExercise[n].initialFpmLevel;if(s&&a){return(0,l.getLevelIndex)(s)>(0,l.getLevelIndex)(a)}}if(t&&t.name==="percent_correct"){var i=r.taskProgress.attemptHistory.filter(function(e){return e.correct}).length;var o=p(e.numRequired,t.value/100);return i>=o}return m(e,r)}case"num_correct_in_a_row":return true;case"first_x_or_num_correct_in_a_row":return true;case"x_of_the_last_y":return true;default:throw new u.KAError("Error checking if promotion is satisfied; "+"unknown type ".concat(e.type),u.Errors.Internal)}}function g(e,r){switch(e.type){case"num_problems":{var t=e.numRequired-r.length;if(r.length===0){return i18n.ngettext("Do %(num)s problem","Do all %(num)s problems",e.numRequired)}if(t<=0){return i18n._("All done!")}return i18n.ngettext("Do %(num)s more problem","Do %(num)s more problems",t)}case"num_correct_in_a_row":return i18n.ngettext("Get %(num)s questions correct in a row","Get %(num)s questions correct in a row",e.numRequired);case"first_x_or_num_correct_in_a_row":{var n=e.first>=e.numRequired;var s=i(r)<r.length;if(n||s){return i18n.ngettext("Get %(num)s questions correct in a row","Get %(num)s questions correct in a row",e.numRequired)}var a=e.first-r.length;if(a>0){if(r.length>0){return i18n.ngettext("See if you can get the next question, as well!","See if you can get the next %(num)s questions!",a)}return i18n.ngettext("See if you can get the first question!","See if you can get the next %(num)s questions!",a)}return o}case"x_of_the_last_y":return i18n._("Get %(x)s out of %(y)s correct",{x:e.correct,y:e.numRequired});default:throw new u.KAError("Error formatting criterion; unknown type ".concat(e.type),u.Errors.Internal)}}e.exports={parse:f,isSatisfied:m,getNumRequiredForPromotion:p,isPromoted:v,format:g}},VwlT:function(e,r,t){"use strict";t("pNMO");t("4Brf");t("ma9I");t("TeQF");t("fbCW");t("yq1k");t("4mDm");t("+2oP");t("3KgV");t("5DmW");t("07d7");t("5s+n");t("JTJg");t("hByQ");t("FZtP");t("3bBZ");t("vxnP");var n=a(t("lTCR"));var g=s(t("4PhQ"));var d=a(t("x+rD"));var i=a(t("nSHN"));var f=s(t("o1mU"));var o=a(t("/eLw"));var k=t("sbZd");var b=t("0bMH");var m=t("xoFN");function s(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};if(n.get||n.set){Object.defineProperty(r,t,n)}else{r[t]=e[t]}}}}r.default=e;return r}}function a(e){return e&&e.__esModule?e:{default:e}}function u(){var r=x(["\n    mutation attemptProblem($input: AttemptProblemInput!) {\n        attemptProblem(attempt: $input) {\n            result {\n                userExercise {\n                    ...userExerciseFields\n                }\n                newTask {\n                    cards {\n                        done\n                        cardType\n                        ... on ProblemCard {\n                            exerciseName\n                            problemType\n                        }\n                    }\n                    includeSkipButton\n                    task {\n                        description\n                        id\n                        key\n                        languageTag\n                        pointBounty\n                        pointsEarned\n                        taskType\n                        title\n                        translatedDescription\n                        translatedTitle\n                        avatarPartsAwarded {\n                            id\n                            name\n                            partType\n                            thumbnailSrc\n                            translatedDisplayName\n                            translatedRequirements\n                        }\n                        badgesAwarded {\n                            iconSrc\n                            translatedDescription\n                            translatedExtendedDescription\n                        }\n                        completionCriteria {\n                            name\n                        }\n                        ... on PracticeTask {\n                            promotionCriteria {\n                                name\n                                value\n                            }\n                            reservedItems\n                            reservedItemsCompleted\n                            taskAttemptHistory {\n                                correct\n                                timeDone\n                                seenHint\n                                itemId\n                            }\n                        }\n                    }\n                    userExercises {\n                        ...userExerciseFields\n                    }\n                }\n                actionResults {\n                    attemptCorrect\n                    notificationsAdded {\n                        avatarParts\n                        badges\n                        readable\n                        toast\n                        urgent\n                        continueUrl\n                    }\n                    pointsEarned {\n                        points\n                    }\n                }\n                attemptPromotions {\n                    missionsPromotions {\n                        level\n                        exerciseIds\n                    }\n                    fpmPromotions {\n                        progressKey\n                        level\n                    }\n                }\n                updatedRecommendations {\n                    contentId\n                    kind\n                    sourceId\n                }\n                error {\n                    code\n                    debugMessage\n                    uuid\n                }\n            }\n        }\n    }\n\n    ","\n"]);u=function e(){return r};return r}function l(e,r){return v(e)||p(e,r)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,r){var t=[];var n=true;var s=false;var a=undefined;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=true){t.push(o.value);if(r&&t.length===r)break}}catch(e){s=true;a=e}finally{try{if(!n&&i["return"]!=null)i["return"]()}finally{if(s)throw a}}return t}function v(e){if(Array.isArray(e))return e}function E(){var r=x(["\n    query getAssessmentItem($input: AssessmentItemInput!) {\n        assessmentItem(input: $input) {\n            item {\n                id\n                sha\n                problemType\n                itemData\n            }\n            error {\n                code\n                debugMessage\n            }\n        }\n    }\n"]);E=function e(){return r};return r}function P(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){y(r,e,t[e])})}return r}function y(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function I(){var r=x(["\n    mutation getOrCreatePracticeTask($input: GetOrCreatePracticeTaskInput!) {\n        getOrCreatePracticeTask(input: $input) {\n            result {\n                error {\n                    code\n                    debugMessage\n                }\n                userTask {\n                    cards {\n                        done\n                        cardType\n                        ... on ProblemCard {\n                            exerciseName\n                            problemType\n                        }\n                    }\n                    includeSkipButton\n                    includeOptOutButton\n                    includeWorkedExampleButton\n                    practiceExercise {\n                        ...userExerciseFields\n                    }\n                    readOnly\n                    task {\n                        contentKey\n                        directLink\n                        description\n                        exerciseLength\n                        id\n                        key\n                        languageTag\n                        pointBounty\n                        pointsEarned\n                        slug\n                        taskType\n                        title\n                        timeEstimate {\n                            lowerBound\n                            upperBound\n                        }\n                        translatedDescription\n                        translatedTitle\n                        avatarPartsAwarded {\n                            id\n                            name\n                            partType\n                            thumbnailSrc\n                            translatedDisplayName\n                            translatedRequirements\n                        }\n                        badgesAwarded {\n                            iconSrc\n                            translatedDescription\n                            translatedExtendedDescription\n                        }\n                        completionCriteria {\n                            name\n                        }\n                        promotionCriteria {\n                            name\n                            value\n                        }\n                        reservedItems\n                        reservedItemsCompleted\n                        taskAttemptHistory {\n                            correct\n                            timeDone\n                            seenHint\n                            itemId\n                        }\n                    }\n                    userExercises {\n                        ...userExerciseFields\n                    }\n                }\n            }\n        }\n    }\n\n    ","\n"]);I=function e(){return r};return r}function h(){var r=x(["\n    fragment userExerciseFields on UserExercise {\n        exercise {\n            id\n            assessmentItemCount: numAssessmentItems\n            displayName\n            isQuiz\n            name\n            nodeSlug\n            progressKey\n            translatedDisplayName\n            relatedContent {\n                id\n                contentKind\n                kind\n                thumbnailUrl\n                translatedTitle\n\n                ... on Article {\n                    kaUrl\n                    nodeSlug\n                    relativeUrl\n                    slug\n                }\n\n                ... on Video {\n                    duration\n                    imageUrl\n                    kaUrl\n                    nodeSlug\n                    relativeUrl\n                    slug\n                    translatedYoutubeId\n                }\n            }\n            relatedVideos {\n                contentKind\n                duration\n                id\n                imageUrl\n                kaUrl\n                kind\n                nodeSlug\n                relativeUrl\n                slug\n                thumbnailUrl\n                translatedTitle\n                translatedYoutubeId\n            }\n            problemTypes {\n                items {\n                    id\n                    live\n                    sha\n                }\n                name\n                relatedVideos\n            }\n            translatedProblemTypes {\n                items {\n                    id\n                    live\n                    sha\n                }\n                name\n                relatedVideos\n            }\n        }\n        exerciseName\n        exerciseProgress {\n            level\n            mastered\n            practiced\n        }\n        fpmMasteryLevel\n        isSkillCheck\n        lastAttemptNumber\n        lastCountHints\n        lastDone\n        lastMasteryUpdate\n        longestStreak\n        masteryPoints\n        maximumExerciseProgress {\n            level\n            mastered\n            practiced\n        }\n        maximumExerciseProgressDate\n        practicedDate\n        proficientDate\n        secondsPerFastProblem\n        snoozeTime\n        streak\n        totalCorrect\n        totalDone\n    }\n"]);h=function e(){return r};return r}function x(e,r){if(!r){r=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var A=1e3;var w=3e4;var T=(0,n.default)(h());var O=(0,n.default)(I(),T);function D(t,n){return new Promise(function(e,r){setTimeout(function(){return r(new g.KAError("timeout",g.Errors.Internal))},n);t.then(e).catch(r)})}function C(r,t,n){return function(e){e({type:"LOADED_EXERCISE",taskData:r,assessmentItem:t,offlineHintsCount:n||0});e({type:"REFRESH_LIVE_UPDATES"})}}function S(r){return function(e){e({type:"UPDATE_TASK",taskData:r})}}function R(s,a){var i=a&&(0,m.getOfflineHintsCount)(a.id);return function(e,r){e(C(s,a,i));if(i!=null&&i>0&&a){var t=r();var n=Q(t);Z(t,n).then(function(){return(0,m.clearOfflineHintsCount)(a.id)})}}}var N=function e(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=(0,o.default)(window.location.search),s=n.assignment;var a=P({},s?{assignmentKey:s}:null,{exerciseName:r,stopCardPersist:t,canReserveItems:true});return(0,f.apolloMutate)(O,{variables:{input:a}}).then(function(e){var r=e.data.getOrCreatePracticeTask.result,t=r.error,n=r.userTask;if(t){q("getOrCreatePracticeTask",t);return null}if(!n){var s={code:"GRAPHQL_ERROR",debugMessage:"No data was returned from GraphQL."};q("getOrCreatePracticeTask",s);return null}return(0,b.transformUserTask)(n)})};var M=(0,n.default)(E());var H=function e(r,t){var i="You indicated in settings that you want "+'to "hide visually-dependent content", but all of the problems '+"in this exercise depend on visuals. If you want to complete "+"it, please go to the settings page and de-select that option.";var o=JSON.stringify(r);return(0,f.default)(M,{variables:{input:r},fetchPolicy:"cache-first",module:t?"multithreaded":undefined}).then(function(e){if(e.errors){var r=JSON.stringify(e.errors);var t="GraphQL errors fetching item: ".concat(r);return Promise.reject({code:"GRAPHQL_ERROR",debugMessage:t,inputJson:o})}if(e.data&&e.data.assessmentItem){var n=e.data.assessmentItem,s=n.item,a=n.error;if(a){if(a.code==="NO_ACCESSIBLE_ITEMS"){alert(i)}return Promise.reject(P({},a,{inputJson:o}))}return Promise.resolve(s)}return Promise.reject({code:"GRAPHQL_ERROR",debugMessage:"No data in GraphQL response.",inputJson:o})})};var K=function e(n){var s=null;var a=null;return function(e,r){var t=JSON.stringify(e);if(s===t&&a!=null){return Promise.resolve(a)}s=t;a=n(e,r);return a}};var L=K(H);var B=function e(r,t,n){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var i={exerciseId:r,problemNumber:t,quizProblemNumber:n,lastSeenProblemSha:s};return L(i,a)};var U=function e(r,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s={exerciseId:r,itemId:t};return L(s,n)};function V(e){if(e.taskProgress&&e.taskProgress.taskComplete){return Promise.resolve(null)}var r=(0,k.getNextProblemData)(e),t=r.exerciseId,n=r.problemNumber,s=r.quizProblemNumber;if(e.taskInfo&&e.taskInfo.taskReservedItems){var a=(0,k.getNextReservedItem)(e);if(!(typeof a.itemId==="string")||!(typeof a.exerciseId==="string")){return Promise.resolve(null)}return U(a.exerciseId,a.itemId,true)}return B(t,n,s,e.taskProgress&&e.taskProgress.assessmentItemMetadata.sha,true)}function F(e){if(e.cards.length===0||!e.userExercises||e.userExercises.length===0){return Promise.resolve(null)}var r=e.cards[0].exerciseName;var t=e.userExercises.find(function(e){return e.exercise===r});if(!t){return Promise.resolve(null)}var n=t.exerciseModel;var s=t.totalDone+1;if(e.taskJson&&e.taskJson.reservedItems&&e.taskJson.reservedItems.length>0&&e.taskJson.reservedItemsCompleted){var a=(0,k.getIncompleteReservedItems)(e.taskJson.reservedItems,e.taskJson.reservedItemsCompleted);if(a.length>0){var i=a[0],o=i.exerciseId,u=i.itemId;return U(o,u)}}var l=n.id;if(n.isQuiz){var c=e.taskJson&&e.taskJson.taskAttemptHistory||[];var d=c.length;var f=n.assessmentItemCount;var m=d%f;return B(l,s,m)}return B(l,s)}function J(r,e){return function(s,a){N(r,e).then(function(r){if(!r){throw new g.KAError("Unable to load exercise data",g.Errors.Internal)}return F(r).then(function(e){return[r,e]},function(e){return W(s,a,e)})}).then(function(e){var r=l(e,2),t=r[0],n=r[1];s(R(t,n));V(a())}).catch(function(e){g.default.error("Couldn't load exercise info for exercise "+"".concat(r,":"),g.Errors.Internal,e)})}}function j(e){return e.taskJson&&e.taskJson.key||""}function G(n){return function(r,t){F(n).then(function(e){r(R(n,e));V(t())},function(e){return W(r,t,e,j(n))}).catch(function(e){var r=j(n);g.default.error("Couldn't load assessment item for task ".concat(r,":"),g.Errors.Internal,e)})}}var q=function e(r,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var s=t.code,a=t.debugMessage;g.default.error("".concat(r," failed: ").concat(s),g.Errors.Internal,null,{sentry:{extras:P({},n,{debugMessage:a}),fingerprint:[r,s]}})};var W=function e(r,t,n,s){var a=t(),i=a.taskInfo;var o=n.inputJson;var u={inputJson:o,taskKey:s||i&&i.taskKey};q("getAssessmentItem",n,u);r(ne(n));return Promise.reject(P({},n,u))};function X(e,r,t,n,s,a,i,o,u){if(!a.taskProgress||!a.problemProgress||!a.taskInfo){return null}var l=a.taskProgress.assessmentItemMetadata;var c=a.problemProgress,d=c.numberOfAttempts,f=c.hintsVisible;var m=a.taskInfo,p=m.taskContentKey,v=m.taskKey,g=m.taskGenerationTime,E=m.userMissionId;var y=(0,k.getCurrentExerciseData)(a),b=y.id;var P=a.environmentState.topicId;var I={problemNumber:e,assessmentItemSha:l.sha,assessmentItemId:l.id,completed:r||t,exerciseId:b,topicId:P,problemType:l.problemType,countHints:f,timeTaken:n,attemptNumber:d+1,attemptContent:s,attemptState:u||"",taskContentKey:p,taskKey:v,taskGenerationTime:g,userMissionId:E||"",skipped:t,clientDt:(new Date).toJSON(),localTimezoneOffsetSeconds:-1*(new Date).getTimezoneOffset()*60,context:o,gaReferrer:i};return{input:I}}function z(e,r){if(!e.correct){return true}if(r.taskProgress&&!r.taskProgress.completionCriteriaSatisfied){return true}return false}function Q(e){if(!e.problemProgress){return null}var r=e.problemProgress.lastAttemptOrHintTime;if(!r){return null}var t=Date.now()-r;return Math.round(t/1e3)}var Y=(0,n.default)(u(),T);function $(t,n,s,a,i,o){var e=(0,k.getCurrentExerciseData)(a),r=e.totalDone;if(!a.taskProgress){return Promise.reject("No taskProgress in state!")}var u=a.taskProgress.assessmentItemMetadata;var l=(0,k.getCurrentReservedItem)(a);var c=l.itemId?null:r+1;return d.default.getGAReferrer().then(function(e){var r=X(c,t.correct,n,s,JSON.stringify(t.guess),a,e,i,JSON.stringify(t.state));return(0,f.apolloMutate)(Y,{variables:r||undefined,module:o?"multithreaded":undefined}).then(function(e){(0,m.clearOfflineHintsCount)(u.id);return e})})}function Z(t,n){var e=(0,k.getCurrentExerciseData)(t);var r=e.totalDone;if(!t.taskProgress||!t.problemProgress){return Promise.reject("No taskProgress or problemProgress in state!")}var s=t.problemProgress.hintsVisible;var a=t.taskProgress.assessmentItemMetadata;var i=(0,k.getCurrentReservedItem)(t);var o=i.itemId?null:r+1;return d.default.getGAReferrer().then(function(e){var r=X(o,false,false,n,"hint",t,e);return(0,f.apolloMutate)(Y,{variables:r||undefined,module:"multithreaded"}).catch(function(e){(0,m.trackHintsOffline)(a.id,s);throw e})})}function ee(r,t){return function(e){e({type:"CHECK_ANSWER",score:r,skipped:t});e({type:"REFRESH_LIVE_UPDATES"})}}function re(){return{type:"CHECK_ANSWER_TIMEOUT"}}function te(e){return{type:"ADD_ATTEMPT_PROMISE",promise:e}}function ne(e){return{type:"REPORT_ERROR",error:e}}function se(){return{type:"RELOAD_EXERCISE"}}function ae(e,r){if(!e.actionResults){return}var t=e.newTask;var n=e.actionResults.pointsEarned;var s=i.default.fromGraphQL(e.actionResults);var a=s.notificationsAdded;if(n){r(be(n.points))}if(t){r(S((0,b.transformUserTask)(t)))}if(a){a.badges.forEach(function(e){if(e.class_.includes("BadgeNotification")){r(ye(e))}});a.avatarParts.forEach(function(e){if(e.class_.includes("AvatarPartNotification")){r(Ee(e))}});a.toast.forEach(function(e){if(e.class_.includes("AssignmentCompletedNotification")){r(Ce(e))}})}i.default.respondToAction(s)}var ie=function e(r){return r.reduce(function(e,r){var t=r.level,n=r.exerciseIds;return P({},e,y({},t,(e[t]||[]).concat(n)))},{})};var oe=function e(r){return r.reduce(function(e,r){var t=r.progressKey,n=r.level;return P({},e,y({},t,n))},{})};var ue=function e(E,y){return function(e){if(!e||e.errors){var r=e&&e.errors&&JSON.stringify(e.errors)||"no response";var t={code:"GRAPHQL_ERROR",debugMessage:r};q("attemptProblem",t);E(ne(t));return}var n=e.data.attemptProblem.result;if(n.error){var s=n.error;var a=y();var i=a.problemProgress,o=a.taskProgress,u=a.taskInfo;var l=(0,k.getCurrentExerciseData)(a),c=l.id,d=l.totalDone;var f={exerciseId:c,totalDone:d,itemId:o&&o.assessmentItemMetadata.id,hintsVisible:i&&i.hintsVisible,taskKey:u&&u.taskKey};q("attemptProblem",s,f);E(ne(s));return Promise.reject(P({},s,f))}if(n.userExercise){var m=(0,b.transformUserExercise)(n.userExercise);E(xe(m))}ae(n,E);if(n.attemptPromotions){var p=n.attemptPromotions,v=p.missionsPromotions,g=p.fpmPromotions;E(_e(ie(v)));E(we(oe(g)))}if(n.updatedRecommendations){E(Te(n.updatedRecommendations))}}};function le(m,p,v){return function(r,e){if(!m.empty||p){var t=e();if(!t.problemProgress||!t.taskProgress){return null}var n=t.taskProgress,s=t.problemProgress;var a=JSON.stringify(m.guess);var i=s.lastAttemptOrHintTime,o=s.lastGuess;var u=i?Date.now()-i:0;if(p||a!==o||u>A){var l=Q(t);var c=n.attemptPromises;var d=c[c.length-1]||Promise.resolve();var f=d.then(function(){return D($(m,p,l,t,v,z(m,e())),w).then(ue(r,e)).catch(function(e){if(e.message==="timeout"){r(ne({code:"TIMEOUT"}))}g.default.error("Error sending problem attempt:",g.Errors.Internal,e)})});r(te(f))}}r(ee(m,p));setTimeout(function(){r(re())},1e3)}}function ce(){return{type:"MOVING_TO_NEXT_PROBLEM"}}function de(){return{type:"SHOW_RELATED_CONTENTS"}}function fe(r){return function(e){e({type:"GOTO_NEXT_PROBLEM",assessmentItem:r});e({type:"REFRESH_LIVE_UPDATES"})}}function me(){return function(r,t){r(ce());var e=t();var n=e.taskProgress&&e.taskProgress.assessmentItemMetadata.id;if(e.taskProgress&&e.taskProgress.completionCriteriaSatisfied){Promise.all(e.taskProgress.attemptPromises).then(function(){r(fe(null))});return}return V(e).then(function(e){r(fe(e));if(n){(0,m.clearOfflineHintsCount)(n)}V(t())},function(e){return W(r,t,e)})}}function pe(){return{type:"SHOW_HINT"}}function ve(){return function(r,e){var t=e();if(t.problemProgress&&t.taskProgress&&!t.problemProgress.problemComplete){var n=t.taskProgress;var s=Q(t);var a=n.attemptPromises;var i=a[a.length-1]||Promise.resolve();var o=i.then(function(){return D(Z(t,s),w)}).then(ue(r,e)).catch(function(e){if(e.message==="timeout"){r(ne({code:"TIMEOUT"}))}g.default.error("Error sending hint attempt:",g.Errors.Internal,e)});r(te(o))}r(pe())}}function ge(){return function(e,n){var r=function e(){var r=n(),t=r.problemProgress;if(!t){return false}return t.hintsVisible<t.totalHints};while(r()){e(ve())}}}function Ee(e){return{type:"ADD_AVATAR_PART",avatarPart:e}}function ye(e){return{type:"ADD_BADGE",badge:e}}function be(e){return{type:"ADD_POINTS",points:e}}function Pe(e){return{type:"ANSWERABLE_CHANGED",answerable:e}}function Ie(){return{type:"INTERACTED"}}function ke(e){return{type:"KEYPAD_LAYOUT_CHANGED",height:e}}function he(){return{type:"MOVING_TO_NEXT_TASK"}}function xe(e){return{type:"UPDATE_USER_EXERCISE",userExercise:e}}function Ae(e){return{type:"SET_DRAWING_AREA_AVAILABILITY",available:e}}function _e(e){return{type:"ON_PROMOTIONS",promotions:e}}function we(e){return{type:"ON_FPM_PROMOTIONS",promotions:e}}function Te(e){return{type:"ON_UPDATE_RECOMMENDATIONS",recommendations:e}}function Oe(){return{type:"HIDE_FEEDBACK_POPOVER"}}function De(){return{type:"RESET_IS_LOADED"}}function Ce(e){return{type:"ADD_ASSIGNMENT_COMPLETED_CONTEXT",context:e}}e.exports={loadFromExerciseName:J,loadFromTaskData:G,fetchTaskData:N,checkAnswerAndMaybeSendProblemLog:le,gotoNextProblem:me,showRelatedContents:de,showHintAndSentHintLog:ve,showAllHintsAndSendHintLogs:ge,addAvatarPart:Ee,addBadge:ye,addPoints:be,answerableChanged:Pe,interacted:Ie,keypadLayoutChanged:ke,gotoNextTask:he,setDrawingAreaAvailability:Ae,hideFeedbackPopover:Oe,resetIsLoaded:De,reloadExercise:se,handleAttemptResponse:ue,handleActionResults:ae,GET_OR_CREATE_PRACTICE_TASK_MUTATION:O}},sbZd:function(e,r,t){"use strict";t("pNMO");t("4Brf");t("ma9I");t("TeQF");t("fbCW");t("yq1k");t("4mDm");t("2B1R");t("+2oP");t("T63A");t("5DmW");t("07d7");t("JTJg");t("UxlC");t("EnZy");t("FZtP");t("3bBZ");var n=t("ANjH");var s=i(t("TdMD"));var F=t("4PhQ");var a=t("0zMT");var J=i(t("Borw"));var h=t("nA/X");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,r){return c(e)||l(e,r)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,r){var t=[];var n=true;var s=false;var a=undefined;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=true){t.push(o.value);if(r&&t.length===r)break}}catch(e){s=true;a=e}finally{try{if(!n&&i["return"]!=null)i["return"]()}finally{if(s)throw a}}return t}function c(e){if(Array.isArray(e))return e}function j(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){G(r,e,t[e])})}return r}function G(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var d=(0,a.createCompose)({reduxDevtoolsOptions:{name:"Exercises"}});var i18n=t("HEOz");var q=function e(r){return{calculator:!!r.answerArea.calculator,chi2Table:!!r.answerArea.chi2Table,periodicTable:!!r.answerArea.periodicTable,tTable:!!r.answerArea.tTable,zTable:!!r.answerArea.zTable}};var x=function e(r){return r.hints.length};var f=function e(r){return!!r.requiresScreenOrMouse};var m=function e(r){return r.taskType==="mastery"};var p=function e(r){return r.taskType==="practice"};var v=function e(r){return r.taskType==="topic_quiz"||r.taskType==="topic_unit_test"||r.taskType==="subject_challenge"||r.taskType==="mastery_challege"};var y=function e(r){if(!r){return null}var t=r.cards.map(function(e){return e.exerciseName});var n=r.userExercises;if(!n){throw new F.KAError("userExercises is missing on taskData",F.Errors.Internal)}var s=n.reduce(function(e,r){var t=r.exerciseModel;var n=t.relatedVideos||[];var s=t.relatedContent||[];e[r.exercise]={id:t.id,title:t.translatedDisplayName,relatedVideos:n.map(function(e){return{contentId:e.contentId,duration:e.duration,translatedTitle:e.translatedTitle,translatedDescription:e.translatedDescription,kaUrl:e.kaUrl,imageUrl:e.imageUrl,relativeUrl:e.relativeUrl,id:e.id,progressKey:e.progressKey,thumbnailData:e.thumbnailData,nodeSlug:e.nodeSlug,youtubeId:e.translatedYoutubeId,conceptTagsInfo:e.conceptTagsInfo,__video:e}}),relatedContents:s.filter(function(e){return e!==null}).map(function(e){if(e.contentKind==="Video"){return j({},e,{slug:e.nodeSlug.replace("v/",""),youtubeId:e.translatedYoutubeId,__video:e})}if(e.contentKind==="Article"){return j({},e,{imageUrl:e.thumbnailUrl,nodeUrl:e.relativeUrl,slug:e.nodeSlug.replace("a/","")})}if(e.contentKind==="Exercise"){return j({},e,{slug:e.nodeSlug.replace("e/","")})}return e}),problemTypes:t.problemTypes,translatedProblemTypes:t.translatedProblemTypes,assessmentItemCount:t.assessmentItemCount,isQuiz:t.isQuiz,isSkillCheck:t.isSkillCheck,initialLevel:r.exerciseProgress.level,initialFpmLevel:r.fpmMasteryLevel,maximumExerciseProgressDt:r.maximumExerciseProgressDt,nodeSlug:t.nodeSlug};return e},{});var a=r.taskJson;if(!a){throw new F.KAError("taskJson is missing on taskData",F.Errors.Internal)}return{exerciseDescriptors:t,infoByExercise:s,showSkipButton:r.includeSkipButton,requireAttemptBeforeHints:a.taskType==="topic_quiz"||a.taskType==="topic_unit_test"||a.taskType==="subject_challenge"||a.taskType==="mastery_challenge",completionCriteria:J.default.parse(a.completionCriteria.name),promotionCriteria:p(a)?a.promotionCriteria:undefined,pointBounty:a.pointBounty,taskType:a.taskType,taskId:a.id,taskKey:a.key,userMissionId:r.userMissionId,taskGenerationTime:m(a)?a.generationTime:undefined,taskTitle:a.translatedTitle,taskDescription:a.translatedDescription,taskReservedItems:a.reservedItems,taskSlug:p(a)?a.slug:undefined,exerciseNames:n.map(function(e){return e.exercise}),content:p(a)?a.content:undefined,taskContentKey:v(a)||p(a)?a.contentKey:undefined}};var W=function e(r,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!r||!t){return null}var s=r.taskJson;if(!s){throw new F.KAError("taskJson is missing on taskData",F.Errors.Internal)}var a=s.taskAttemptHistory.map(function(e){return{correct:e.correct,seenHint:e.seenHint}});var i=r.cards;if(!i){throw new F.KAError("cards is missing on taskData",F.Errors.Internal)}var o=r.userExercises;if(!o){throw new F.KAError("userExercises is missing on taskData",F.Errors.Internal)}if(i.length>0){var u=o.find(function(e){return e.exercise===i[0].exerciseName});if(!u){throw new F.KAError("couldn't find first userExercise",F.Errors.Internal)}var l=u.lastAttemptNumber===0&&u.lastCountHints===0&&n>0;if(l){a.push({correct:false,seenHint:true})}}var c=o.reduce(function(e,r){e[r.exercise]={currentLevel:r.exerciseProgress.level,currentFpmLevel:r.fpmMasteryLevel,totalDone:r.totalDone,initialHintsVisible:r.lastCountHints,initialNumberOfAttempts:r.lastAttemptNumber};return e},{});var d=o.reduce(function(e,r){e[r.exerciseModel.progressKey]=r.exercise;return e},{});var f=t&&JSON.parse(t.itemData);var m=J.default.parse(s.completionCriteria.name);var p=s.reservedItemsCompleted;var v={exerciseDescriptorIndex:0,exerciseProgressKeyToName:d,progressByExercise:c,attemptHistory:a,completedAssessmentItems:[],completionCriteriaText:J.default.format(J.default.parse(s.completionCriteria.name),a),completionCriteriaSatisfied:false,taskComplete:false,movingToNextProblem:false,reservedItemsCompleted:p,itemData:f,assessmentItemMetadata:{sha:t.sha,id:t.id,problemType:t.problemType,sidebarItems:q(f)},avatarParts:s.avatarPartsAwarded.slice(),badgesEarned:s.badgesAwarded.slice(),pointsEarned:s.pointsEarned,attemptPromises:[],assignmentContext:null,promotionCriteriaSatisfied:false};var g=J.default.isSatisfied(m,{taskProgress:v});var E=y(r);return j({},v,{completionCriteriaSatisfied:g,promotionCriteriaSatisfied:J.default.isPromoted(m,{taskProgress:v,taskInfo:E}),taskComplete:g})};var A=function e(r,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!r||!t){return null}var s=r.cards;if(!s){throw new F.KAError("cards is missing on taskData",F.Errors.Internal)}if(s.length===0){return{hintsVisible:0,totalHints:0,requiresScreenOrMouse:false,attemptMessage:null,answerStatus:"unanswered",numberOfAttempts:0,hintsAreFree:false,problemComplete:false,interacted:false,updatedAnswer:false,answerable:false,relatedContentsVisible:false,recentlyCheckedAnswer:false,guessLog:[],drawingAreaAvailable:false,keypadHeight:null,readOnly:false,showRationales:false,feedbackPopoverVisible:false}}var a=r.userExercises;if(!a){throw new F.KAError("userExercises is missing on taskData",F.Errors.Internal)}var i=a.find(function(e){return e.exercise===s[0].exerciseName});if(!i){throw new F.KAError("can't find first userExercise",F.Errors.Internal)}var o=i.lastAttemptNumber;var u=JSON.parse(t.itemData);var l=Math.max(i.lastCountHints,n||0);return{hintsVisible:l,totalHints:x(u),requiresScreenOrMouse:f(u),relatedContentsVisible:false,attemptMessage:null,answerStatus:l>0||o>0?"incorrect":"unanswered",numberOfAttempts:o,hintsAreFree:o>0,problemComplete:false,interacted:false,updatedAnswer:false,answerable:false,recentlyCheckedAnswer:false,guessLog:[],drawingAreaAvailable:true,keypadHeight:null,lastAttemptOrHintTime:Date.now(),lastGuess:null,readOnly:false,showRationales:false}};function g(e,r){var t=e.taskInfo;switch(r.type){case"RELOAD_EXERCISE":return y(null);case"LOADED_EXERCISE":return y(r.taskData);case"UPDATE_TASK":return y(r.taskData);default:return t}}function E(e,r){var t=e.taskInfo,n=e.taskProgress,s=e.problemProgress;switch(r.type){case"RELOAD_EXERCISE":{return W(null,null)}case"LOADED_EXERCISE":{return W(r.taskData,r.assessmentItem,r.offlineHintsCount)}case"CHECK_ANSWER":{if(!t){throw new F.KAError("taskInfo not defined",F.Errors.Internal)}else if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}else if(!s){throw new F.KAError("problemProgress not defined",F.Errors.Internal)}var a=r.score,i=a.correct,o=a.empty;var u=r.skipped;if(!u&&o){return n}var l=s.numberOfAttempts===0&&s.hintsVisible===0;var c=l?[].concat(n.attemptHistory,[{correct:u?false:i,seenHint:false}]):n.attemptHistory;var d=n.exerciseDescriptorIndex,f=n.progressByExercise;var m=t.exerciseDescriptors[d];var p=f[m].totalDone;var v=j({},f,G({},m,j({},f[m],{totalDone:p+(u||i?1:0)})));var g=j({},n,{attemptHistory:c,progressByExercise:v});var E={taskInfo:t,taskProgress:g,problemProgress:s};return j({},g,{completionCriteriaSatisfied:J.default.isSatisfied(t.completionCriteria,E),completionCriteriaText:J.default.format(t.completionCriteria,g.attemptHistory),promotionCriteriaSatisfied:J.default.isPromoted(t.completionCriteria,E)})}case"SHOW_HINT":{if(!t){throw new F.KAError("taskInfo not defined",F.Errors.Internal)}else if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}else if(!s){throw new F.KAError("problemProgress not defined",F.Errors.Internal)}var y=s.numberOfAttempts===0&&s.hintsVisible===0;if(y){var b=j({},n,{attemptHistory:[].concat(n.attemptHistory,[{correct:false,seenHint:true}])});var P={taskInfo:t,taskProgress:b,problemProgress:s};return j({},b,{completionCriteriaSatisfied:J.default.isSatisfied(t.completionCriteria,P),completionCriteriaText:J.default.format(t.completionCriteria,b.attemptHistory),promotionCriteriaSatisfied:J.default.isPromoted(t.completionCriteria,P)})}return n}case"MOVING_TO_NEXT_PROBLEM":{return j({},n,{movingToNextProblem:true})}case"GOTO_NEXT_PROBLEM":{if(!t){throw new F.KAError("taskInfo not defined",F.Errors.Internal)}else if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}var I=r.assessmentItem;var k=t.exerciseDescriptors[n.exerciseDescriptorIndex];var h=[].concat(n.completedAssessmentItems,[{metadata:j({},n.assessmentItemMetadata),exerciseName:k}]);var x=undefined;if(n.reservedItemsCompleted){x=[].concat(n.reservedItemsCompleted);var A=t.taskReservedItems;if(!A){throw new F.KAError("taskReservedItem is undefined",F.Errors.Internal)}var w=X(A,n.assessmentItemMetadata.id);if(w){x.push(w)}}if(n.completionCriteriaSatisfied||!I){var T=j({},n,{completedAssessmentItems:h,movingToNextProblem:false,taskComplete:true});var O={taskInfo:t,taskProgress:T,problemProgress:s};return j({},T,{promotionCriteriaSatisfied:J.default.isPromoted(t.completionCriteria,O)})}var D=n.progressByExercise;var C=j({},D,G({},k,j({},D[k],{initialHintsVisible:0,initialNumberOfAttempts:0})));var S=JSON.parse(I.itemData);return j({},n,{completedAssessmentItems:h,exerciseDescriptorIndex:(n.exerciseDescriptorIndex+1)%t.exerciseDescriptors.length,progressByExercise:C,itemData:S,reservedItemsCompleted:x,assessmentItemMetadata:{sha:I.sha,id:I.id,problemType:I.problemType,sidebarItems:q(S)},movingToNextProblem:false})}case"ADD_AVATAR_PART":if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}return j({},n,{avatarParts:[].concat(n.avatarParts,[r.avatarPart])});case"ADD_BADGE":if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}return j({},n,{badgesEarned:[].concat(n.badgesEarned,[r.badge])});case"ADD_POINTS":if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}return j({},n,{pointsEarned:n.pointsEarned+r.points});case"ADD_ATTEMPT_PROMISE":if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}return j({},n,{attemptPromises:[].concat(n.attemptPromises,[r.promise])});case"UPDATE_USER_EXERCISE":{if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}var R=r.userExercise;return j({},n,{progressByExercise:j({},n.progressByExercise,G({},R.exercise,j({},n.progressByExercise[R.exercise],{currentLevel:R.exerciseProgress.level,currentFpmLevel:R.fpmMasteryLevel})))})}case"ON_FPM_PROMOTIONS":{if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}var N=r.promotions;var M=z(n,N||{});return j({},n,{progressByExercise:j({},n.progressByExercise,M)})}case"ADD_ASSIGNMENT_COMPLETED_CONTEXT":{var H=r.context,K=H.firstCompletion,L=H.pastDue,B=H.perfectScore,U=H.studentListName,V=H.improvedScore;return j({},n,{assignmentContext:{firstCompletion:K,pastDue:L,perfectScore:B,studentListName:U,improvedScore:V}})}default:return n}}function b(e,r){var t=e.taskInfo,n=e.taskProgress,s=e.problemProgress;switch(r.type){case"RELOAD_EXERCISE":{return A(null,null)}case"LOADED_EXERCISE":{return A(r.taskData,r.assessmentItem,r.offlineHintsCount)}case"REFRESH_LIVE_UPDATES":{if(!t){throw new F.KAError("taskInfo not defined",F.Errors.Internal)}else if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}if(t.taskType!=="practice"){return s}var a=t.exerciseDescriptors[n.exerciseDescriptorIndex];var i=n.progressByExercise[a].currentFpmLevel;var o=(0,h.getLiveMasteryDetails)(n.attemptHistory,t.completionCriteria,i);return j({},s,{liveUpdateDetails:o})}case"SHOW_RELATED_CONTENTS":{return j({},s,{relatedContentsVisible:true})}case"CHECK_ANSWER":{if(!s){throw new F.KAError("problemProgress not defined",F.Errors.Internal)}var u=r.score,l=u.empty,c=u.correct,d=u.message,f=u.guess,m=u.suppressAlmostThere;var p=r.skipped;var v=j({},s,{updatedAnswer:false,recentlyCheckedAnswer:!p,lastAttemptOrHintTime:Date.now(),lastGuess:JSON.stringify(f)});if(p||!l&&!c){return j({},v,{attemptMessage:null,answerStatus:"incorrect",hintsAreFree:true,numberOfAttempts:s.numberOfAttempts+1,problemComplete:false,guessLog:s.guessLog.concat(JSON.stringify(f)),feedbackPopoverVisible:!p})}if(c){return j({},v,{attemptMessage:null,answerStatus:"correct",hintsAreFree:true,problemComplete:true,numberOfAttempts:s.numberOfAttempts+1,guessLog:s.guessLog.concat(JSON.stringify(f)),readOnly:true,showRationales:true,feedbackPopoverVisible:true})}return j({},v,{suppressAlmostThere:m,attemptMessage:d||i18n._("There are still more parts of this question to "+"answer."),feedbackPopoverVisible:true})}case"GOTO_NEXT_PROBLEM":{if(!t){throw new F.KAError("taskInfo not defined",F.Errors.Internal)}else if(!n){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}if(n.completionCriteriaSatisfied||!r.assessmentItem){return j({},s,{feedbackPopoverVisible:false})}var g=JSON.parse(r.assessmentItem.itemData);var E=x(g);var y=t.exerciseDescriptors[n.exerciseDescriptorIndex];var b=t.exerciseDescriptors[(n.exerciseDescriptorIndex+1)%t.exerciseDescriptors.length];var P=n.progressByExercise[b],I=P.initialHintsVisible,k=P.initialNumberOfAttempts;if(y===b){I=0;k=0}return j({},s,{hintsVisible:I,totalHints:E,attemptMessage:null,answerStatus:I>0||k>0?"incorrect":"unanswered",numberOfAttempts:k,hintsAreFree:false,problemComplete:false,interacted:false,updatedAnswer:false,answerable:false,recentlyCheckedAnswer:false,relatedContentsVisible:false,guessLog:[],drawingAreaAvailable:true,readOnly:false,showRationales:false,feedbackPopoverVisible:false,lastAttemptOrHintTime:Date.now()})}case"SHOW_HINT":{if(!s){throw new F.KAError("problemProgress not defined",F.Errors.Internal)}return j({},s,{answerStatus:s.answerStatus==="correct"?s.answerStatus:"incorrect",hintsVisible:s.hintsVisible+1,lastAttemptOrHintTime:Date.now()})}case"ANSWERABLE_CHANGED":{return j({},s,{answerable:r.answerable})}case"INTERACTED":{return j({},s,{interacted:true,updatedAnswer:true})}case"KEYPAD_LAYOUT_CHANGED":{return j({},s,{keypadHeight:r.height})}case"CHECK_ANSWER_TIMEOUT":{return j({},s,{recentlyCheckedAnswer:false})}case"SET_DRAWING_AREA_AVAILABILITY":{return j({},s,{drawingAreaAvailable:r.available})}case"HIDE_FEEDBACK_POPOVER":{return j({},s,{feedbackPopoverVisible:false})}default:return s}}var P=function e(r){var t=r.isLoaded,n=r.inModal,s=n===void 0?false:n,a=r.inPractice,i=a===void 0?false:a,o=r.nextItem,u=r.nextTaskKind,l=r.topic,c=r.topicId,d=r.onShowRelatedContent;return{isLoaded:t,inModal:s,inPractice:i,nextItem:o,nextTaskKind:u,topic:l,topicId:c,movingToNextTask:false,error:null,onShowRelatedContent:d}};var I=function e(r,t){var n=r.environmentState;switch(t.type){case"RELOAD_EXERCISE":return j({},n,{isLoaded:false,error:null});case"LOADED_EXERCISE":return j({},n,{isLoaded:true});case"MOVING_TO_NEXT_TASK":return j({},n,{movingToNextTask:true,isLoaded:false});case"CLEAR_ERROR":return j({},n,{error:null});case"REPORT_ERROR":return j({},n,{error:t.error});case"RESET_IS_LOADED":return j({},n,{isLoaded:false});default:return n}};function k(e,r){return{taskInfo:g(e,r),taskProgress:E(e,r),problemProgress:b(e,r),environmentState:I(e,r)}}var w=function e(s){return function(n){return function(t){return function(e){var r=t(e);s(e,n.getState());return r}}}};var T=[s.default];if(false){var O}var D=function e(r){return d(n.applyMiddleware.apply(void 0,[w(r)].concat(T)))(n.createStore)};var C=function e(r,t){var n=r.nextItem,s=r.nextTaskKind,a=r.topic,i=r.topicId,o=r.inModal,u=r.inPractice,l=r.onShowRelatedContent;return D(t)(k,{taskInfo:y(null),taskProgress:W(null,null),problemProgress:A(null,null),environmentState:P({isLoaded:false,nextItem:n,nextTaskKind:s,topic:a,topicId:i,inModal:o,inPractice:u,onShowRelatedContent:l})})};function S(e){var r=e.taskInfo,t=e.taskProgress;if(!r){throw new F.KAError("taskInfo not defined",F.Errors.Internal)}else if(!t){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}var n=r.exerciseDescriptors[t.exerciseDescriptorIndex];return j({exerciseName:n},t.progressByExercise[n],r.infoByExercise[n])}var R=function e(r){var t=r.split("|");if(t.length!==2){return null}return{exerciseId:t[0],itemId:t[1]}};var X=function e(r,t){var n=true;var s=false;var a=undefined;try{for(var i=r[Symbol.iterator](),o;!(n=(o=i.next()).done);n=true){var u=o.value;var l=R(u);if(l&&l.itemId===t){return u}}}catch(e){s=true;a=e}finally{try{if(!n&&i.return!=null){i.return()}}finally{if(s){throw a}}}return null};var N=function e(r,t){var n=t.reduce(function(e,r){e[r]=e[r]?e[r]+1:1;return e},{});var s=r.filter(function(e){if((n[e]||0)===0){return true}n[e]-=1;return false});return s.map(R).filter(function(e){return!!e})};var M=function e(r){var t=r.taskInfo,n=r.taskProgress;if(!t||!n||!t.taskReservedItems){return{}}var s=n.reservedItemsCompleted;if(!s){throw new F.KAError("reservedItemsCompleted is undefined",F.Errors.Internal)}var a=N(t.taskReservedItems,s);return a.length>0?a[0]:{}};var H=function e(r){var t=r.taskInfo,n=r.taskProgress;if(!t||!n||!t.taskReservedItems){return{}}var s=n.reservedItemsCompleted;if(!s){throw new F.KAError("reservedItemsCompleted is undefined",F.Errors.Internal)}var a=N(t.taskReservedItems,s);return a.length>1?a[1]:{}};function K(e){var r=e.taskInfo,t=e.taskProgress;if(!r){throw new F.KAError("taskInfo not defined",F.Errors.Internal)}else if(!t){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}var n=r.exerciseDescriptors[(t.exerciseDescriptorIndex+1)%r.exerciseDescriptors.length];return j({exerciseName:n},t.progressByExercise[n],r.infoByExercise[n])}function L(e){var r=e.taskProgress,t=e.problemProgress;if(!r){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}else if(!t){throw new F.KAError("problemProgress not defined",F.Errors.Internal)}var n=S(e),s=n.exerciseName;var a=K(e),i=a.id,o=a.exerciseName,u=a.totalDone,l=a.isQuiz,c=a.assessmentItemCount;var d;if(s===o){d=u+(t&&t.problemComplete?1:2)}else{d=u+1}var f=null;if(l){var m=r&&r.attemptHistory||[];var p=m.length;var v=c;f=p%v}return{exerciseId:i,problemNumber:d,quizProblemNumber:f}}function B(e){var r=e.taskProgress;if(!r){throw new F.KAError("taskProgress not defined",F.Errors.Internal)}var t=r.assessmentItemMetadata.problemType;var n=S(e),s=n.relatedContents,a=n.problemTypes;if(a==null){return[]}var i=a.filter(function(e){return e.name!==t});var o=s.filter(function(r){return i.every(function(e){return!(e.relatedVideos||[]).map(function(e){return""+e}).includes(""+r.id)})});return o}var z=function e(i,r){if(!r){return{}}var t=Object.entries(r).reduce(function(e,r){var t=o(r,2),n=t[0],s=t[1];var a=i.exerciseProgressKeyToName[n];if(!a){return e}e[a]=j({},i.progressByExercise[a],{currentFpmLevel:s});return e},{});return t};e.exports={create:C,getCurrentExerciseData:S,getCurrentReservedItem:M,getFpmPromotionUpdates:z,getIncompleteReservedItems:N,getNextExerciseData:K,getNextProblemData:L,getNextReservedItem:H,parseReservedItem:R,getRelatedContents:B,taskInfo:g,taskProgressReducer:E,problemProgress:b}},xoFN:function(e,r,t){"use strict";t("pNMO");t("ma9I");t("TeQF");t("5DmW");t("FZtP");function n(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){s(r,e,t[e])})}return r}function s(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var a="khan-exercises-interface-persistent-hint-set";function i(){try{return JSON.parse(localStorage.getItem(a))||{}}catch(e){return{}}}function o(e){return i()[e]||null}function u(e){l(e,undefined)}function l(e,r){var t=i();try{localStorage.setItem(a,JSON.stringify(n({},t,s({},e,r))))}catch(e){}}e.exports={getOfflineHintsCount:o,trackHintsOffline:l,clearOfflineHintsCount:u}}}]);
//# sourceMappingURL=../../sourcemaps/en/b5e4eb20f666c9633e4670bfbbd78e62.e09d4267b62c179482f4.js.map