(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["./javascript/about-package/about-entry~./javascript/about-package/careers-entry~./javascript/about-p~aba157f5"],{WGxL:function(e,r,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("yq1k");n("5DmW");n("07d7");n("5s+n");n("UxlC");n("hByQ");n("FZtP");Object.defineProperty(r,"__esModule",{value:true});r.verifyAndLinkOAuthAccount=r.USERNAME_VALIDATION_STRINGS=r.USERNAME_MAX_LENGTH=r.USERNAME_MIN_LENGTH=r.NICKNAME_MAX_LENGTH=r.signupUnder13=r.signup=r.makeGoogleContinueObject=r.LOGIN_ERROR_STRINGS=r.login=r.isUsernameAvailable=r.isUsernameValid=r.isEmailValid=r.getLoginErrorString=r.getcontinueUrlFromQueryString=r.EMAIL_REGEX=r.cleverSignup=void 0;var t=c(n("4PhQ"));var u=o(n("gXb0"));var i=n("skGw");var a=o(n("i4iA"));var s=o(n("/eLw"));function o(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(t.get||t.set){Object.defineProperty(r,n,t)}else{r[n]=e[n]}}}}r.default=e;return r}}function l(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var t=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){t=t.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}t.forEach(function(e){f(r,e,n[e])})}return r}function f(e,r,n){if(r in e){Object.defineProperty(e,r,{value:n,enumerable:true,configurable:true,writable:true})}else{e[r]=n}return e}var i18n=n("HEOz");var E=["/coaches"];var d=function e(){var r=(0,s.default)(window.location.search);var n=r.continue||"";var t=n.replace(location.protocol+"//","").replace(location.host,"");if(E.includes(t)||(0,s.default)(window.location.search).alwayscontinue){return t}return null};r.getcontinueUrlFromQueryString=d;var p=function e(){var r=(0,s.default)(window.location.search);var n="/postlogin";var t={type:"google",referral:r.referral?r.referral:""};var a=r.alwayscontinue;var o=d()||"/";return{createchild:"".concat(n,"?").concat((0,u.default)(l({},t,{isparent:1,continue:a?o:"/createchild"}))),teacher:"".concat(n,"?").concat((0,u.default)(l({},t,{isteacher:1,continue:a?o:"/coach"}))),parent:"".concat(n,"?").concat((0,u.default)(l({},t,{isparent:1,continue:a?o:"/parent"}))),default:"".concat(n,"?").concat((0,u.default)(l({},t,{continue:o})))}};r.makeGoogleContinueObject=p;function h(t,a){return function(e){return new Promise(function(r,n){return(0,i.khanFetch)(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,i.encodeParams)(a(e))}).then(function(e){return e.json()}).then(function(e){if(e.errors){n(e)}else{r(e)}}).catch(function(e){if(e.response){e.response.json().then(function(e){return n(e)}).catch(function(e){return n(e)})}else{n(e)}})})}}var v=h("/signup/under13",function(e){return e});r.signupUnder13=v;var R=h("/signup",function(e){return l({},e,{isteacher:e.role==="teacher"?1:0,isparent:e.role==="parent"?1:0})});r.signup=R;var O=h("/signup/clever",function(e){return e});r.cleverSignup=O;var g=h("/login",function(e){return e});r.login=g;var A={BAD_LOGIN:i18n._("Your login or password is incorrect."),DUPLICATE_USERNAME:i18n._("Oops! We’re unable to sign you in with that username. Please sign in with your email address and then change your username to fix this issue. If you don’t have an email address, contact support for help."),GENERIC_ERROR:i18n._("Error logging in. Please try again.")};r.LOGIN_ERROR_STRINGS=A;var m=function e(r){var n=r.badlogin,t=r.duplicateusername;if(n){return A.BAD_LOGIN}if(t){return A.DUPLICATE_USERNAME}return A.GENERIC_ERROR};r.getLoginErrorString=m;var N=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;r.EMAIL_REGEX=N;var T=function e(r){return r&&N.test(r)};r.isEmailValid=T;var w=40;r.NICKNAME_MAX_LENGTH=w;var L=3;r.USERNAME_MIN_LENGTH=L;var b=40;r.USERNAME_MAX_LENGTH=b;var I={ALPHANUMERIC_ONLY:i18n._("Letters and numbers only."),GENERIC_ERROR:i18n.ngettext("Usernames must be alphanumeric, start with a letter, and "+"be %(min)s to %(num)s character long","Usernames must be alphanumeric, start with a letter, and "+"be %(min)s to %(num)s characters long",b,{min:L}),START_WITH_LETTER:i18n._("Start with a letter."),TOO_SHORT:i18n._("Too short."),TOO_LONG:i18n._("Too long."),UNAVAILABLE:i18n._("This username is unavailable."),UNEXPECTED_ERROR:i18n._("Something went wrong."),VALID:i18n._("Looks good!")};r.USERNAME_VALIDATION_STRINGS=I;var y=function e(r){switch(r){case"BAD_CHARACTERS":return I.GENERIC_ERROR;case"INTERNAL":return I.UNEXPECTED_ERROR;case"TOO_SHORT":return I.TOO_SHORT;case"UNAVAILABLE":return I.UNAVAILABLE;default:r;t.default.error("CheckUsernameError code not supported: ".concat(r),t.Errors.Internal);return I.GENERIC_ERROR}};var S=function e(r){var n=r.replace(/\./g,"").toLowerCase();if(n.length<L){return{result:false,reason:I.TOO_SHORT}}if(n.length>b){return{result:false,reason:I.TOO_LONG}}if(!/^[a-zA-Z]/.test(r)){return{result:false,reason:I.START_WITH_LETTER}}if(!/^[a-z0-9]+$/.test(n)){return{result:false,reason:I.ALPHANUMERIC_ONLY}}return{result:true,reason:I.VALID}};r.isUsernameValid=S;var U=function e(r){var n=S(r);if(!n.result){return Promise.resolve(n)}return(0,a.default)(r).then(function(e){var r=e.data;var n=r&&r.checkUsername&&r.checkUsername.error&&r.checkUsername.error.code;if(n){return{result:false,reason:y(n)}}return{result:true,reason:I.VALID}}).catch(function(e){t.default.error("An unexpected error occurred while validating a username",t.Errors.Internal,e,{sentry:{extras:{username:r}}});return{result:false,reason:I.UNEXPECTED_ERROR}})};r.isUsernameAvailable=U;var P=function e(r,t,a,o,u){return new Promise(function(e,n){return(0,i.khanFetch)("/login/oauth/verify",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,i.encodeParams)(l({password:r,oauth_type:t},a?{fb_access_token:a}:null,o?{apple_access_token:o}:null,u?{google_access_token:u}:null))}).then(function(){return e(true)}).catch(function(e){var r=e.response;if(r.status===400){n({badRequest:true})}else if(r.status===401){n({unauthorized:true})}else{n({error:true})}})})};r.verifyAndLinkOAuthAccount=P}}]);
//# sourceMappingURL=../../../../../../../../../sourcemaps/en/javascript/about-package/about-entry~./javascript/about-package/careers-entry~./javascript/about-p~aba157f5.ece72c1b46e8ad8286f1.js.map