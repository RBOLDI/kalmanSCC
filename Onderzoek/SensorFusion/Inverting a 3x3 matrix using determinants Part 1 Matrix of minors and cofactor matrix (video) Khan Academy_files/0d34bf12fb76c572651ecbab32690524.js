(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["0d34bf12fb76c572651ecbab32690524"],{"3atX":function(e,r,t){"use strict";t("5DmW");Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var a=o(t("q1tI"));var i=n(t("Pwnf"));var u=t("Rry3");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};if(n.get||n.set){Object.defineProperty(r,t,n)}else{r[t]=e[t]}}}}r.default=e;return r}}var s=function e(r){var t=r.disabled,n=t===void 0?false:t;var o=(0,u.faceIconColor)(n);return a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M22 11.5C22 6.25 17.75 2 12.5 2C7.25 2 3 6.25 3 11.5C3 16.24 6.47 20.17 11.02 20.89V14.25H8.60V11.5H11.02V9.41C11.02 7.03 12.43 5.71 14.60 5.71C15.64 5.71 16.73 5.90 16.73 5.90V8.23H15.53C14.35 8.23 13.98 8.97 13.98 9.72V11.5H16.62L16.20 14.25H13.98V20.89C18.53 20.17 22 16.24 22 11.5Z",fill:o("#1877F2")}),a.createElement("path",{d:"M16.20 14.25L16.62 11.5H13.98V9.72C13.98 8.97 14.35 8.23 15.53 8.23H16.73V5.90C16.73 5.90 15.64 5.71 14.60 5.71C12.43 5.71 11.02 7.03 11.02 9.41V11.5H8.60V14.25H11.02V20.89C11.50 20.96 12.00 21 12.5 21C13.00 21 13.50 20.96 13.98 20.89V14.25H16.20Z",fill:o(i.default.white)}))};var c=s;r.default=c},akNO:function(e,r,t){"use strict";t("ma9I");t("5DmW");t("NBAS");Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var n=d(t("q1tI"));var i=t("gCLx");var u=t("ANZR");var s=t("sPtk");var o=a(t("4Du/"));var c=t("Y8R6");var l=d(t("4PhQ"));var f=a(t("etw9"));var p=a(t("3atX"));function a(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};if(n.get||n.set){Object.defineProperty(r,t,n)}else{r[t]=e[t]}}}}r.default=e;return r}}function v(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function h(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function g(e,r,t){if(r)h(e.prototype,r);if(t)h(e,t);return e}function b(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}return O(e)}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return y(e)}function O(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function w(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)k(e,r)}function k(e,r){k=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return k(e,r)}function C(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var m=t("ZpD3");var i18n=t("HEOz");var P=function(e){w(a,e);function a(){var e;var o;v(this,a);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++){t[n]=arguments[n]}o=b(this,(e=y(a)).call.apply(e,[this].concat(t)));C(O(o),"state",{error:null,loading:false,loggingIn:false});C(O(o),"handleError",function(e){var r=o.props.onError;l.default.error(e,l.Errors.Internal);if(r){var t=(0,i.getErrorMessageByCode)(e.message);r(t)}o.setState({error:null,loading:false,loggingIn:false})});C(O(o),"handleClick",function(e){o.setState({loading:true});var r=o.props.minorConversions;if(r){m.markMinorConversions(r)}(0,i.getFacebookAuthToken)().then(function(e){o.setState({loggingIn:true});var r=!!o.props.onReauthSuccess;if(r){o.doReauth(e)}else{o.doLogin(e)}}).catch(function(e){if(e){o.handleError(e)}var r=o.props.onReauthError;if(r){var t=(0,u.createReauthUrl)("facebook",e.message);r(t)}})});C(O(o),"doLogin",function(e){(0,i.loginWithFacebook)({token:e,signupCodes:o.props.classCodes}).then(function(e){var r=o.props.postLoginContinueUrl;var t=r?r:"";var n=(0,s.calculateNextUrl)({location:o.props.location,userData:e.user,loginType:"facebook",continueUrl:t,isFirstLogin:e.isFirstLogin,joinClassrooms:e.joinClassrooms});(0,c.redirect)(n)}).catch(function(e){l.default.error(e,l.Errors.Internal);o.handleError(e)})});C(O(o),"doReauth",function(e){(0,u.reauthWithThirdParty)("facebook",e).then(function(e){var r=(0,u.createReauthUrl)("facebook");if(o.props.onReauthSuccess){o.props.onReauthSuccess(r)}o.setState({loggingIn:false,loading:false})}).catch(function(e){l.default.error(e,l.Errors.Internal);var r=(0,u.createReauthUrl)("facebook",e.message);if(o.props.onReauthError){o.props.onReauthError(r)}else{(0,c.redirect)(r)}o.setState({loading:false})})});return o}g(a,[{key:"render",value:function e(){var r=this.state.loading||!!this.props.disabled;return n.createElement(f.default,{title:!this.state.loggingIn?i18n._("Continue with Facebook"):i18n._("Logging you in..."),iconComponent:p.default,disabled:r,onClick:this.handleClick,width:this.props.width,grow:this.props.grow,shrink:this.props.shrink,size:this.props.size})}}]);return a}(n.Component);var j=(0,o.default)(P);r.default=j},gCLx:function(e,r,t){"use strict";t("+2oP");t("3KgV");t("07d7");t("5s+n");Object.defineProperty(r,"__esModule",{value:true});r.getFacebookAuthToken=r.loginWithFacebook=r.FACEBOOK_LOGIN_MUTATION=r.getErrorMessageByCode=void 0;var n=t("o1mU");var o=p(t("lTCR"));var u=t("4PhQ");var a=p(t("Q8Wn"));var i=p(t("whzC"));var s=t("DiaA");var c=t("Y8R6");var l=t("MVfM");var f=t("c+8j");function p(e){return e&&e.__esModule?e:{default:e}}function d(){var r=v(['\n    mutation loginWithFacebookMutation($token: String!, $role: UserRole) {\n        loginWithFacebook(token: $token, role: $role) {\n            user {\n                id\n                kaid\n                canAccessDistrictsHomepage\n                isTeacher\n                hasUnresolvedInvitations\n                transferAuthUrl(pathname: "")\n                preferredKaLocale {\n                    id\n                    kaLocale\n                }\n            }\n            isFirstLogin\n            error {\n                code\n            }\n        }\n    }\n']);d=function e(){return r};return r}function v(e,r){if(!r){r=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var i18n=t("HEOz");var h=function e(r){switch(r){case"ALREADY_LOGGED_IN":return i18n._("You are currently logged in to another Facebook account. Please log out of that account and try again.");case"INVALID_TOKEN":default:return i18n._("Oops! Something went wrong. Please try again.")}};r.getErrorMessageByCode=h;var g=(0,o.default)(d());r.FACEBOOK_LOGIN_MUTATION=g;var b=function e(r){var a=r.token,t=r.role,i=r.signupCodes;return(0,n.apolloMutate)(g,{variables:{token:a,role:(0,f.roleToUserRole)(t)}}).then(function(e){if(e.data.loginWithFacebook.error){var r=e.data.loginWithFacebook.error.code;if(r==="SHADOWS_EXISTING_ACCOUNT"){(0,c.redirect)("/login/oauth/verify?oauth_type=facebook&facebook_access_token=".concat(a))}throw new u.KAError(r,u.Errors.Internal)}var t=e.data.loginWithFacebook,n=t.user,o=t.isFirstLogin;if(i&&i.length){return(0,l.joinClassroomsPostlogin)(i).then(function(e){return{user:n,isFirstLogin:o,joinClassrooms:e}})}return{user:n,isFirstLogin:o}}).catch(function(e){if(e instanceof u.KAError){throw e}throw new u.KAError("Failed to login with Facebook",u.Errors.Internal)})};r.loginWithFacebook=b;var y=function e(){if(typeof window!=="undefined"&&window.FB){return Promise.resolve(window.FB)}return new Promise(function(e,r){var t=document.createElement("script");t.src=i.default.safeLinkTo("https://connect.facebook.net/en/sdk.js?xfbml=1&kidDirectedSite=1");t.onload=function(){e(window.FB)};t.onerror=function(e){r(e)};document.body.appendChild(t)})};var O=function e(){return y().then(function(e){return new Promise(function(r,t){e.init({version:"v2.7",appId:a.default.IS_DEV_SERVER?s.FB_TESTKA_APP_ID:s.FB_APP_ID,status:false,cookie:true,xfbml:true,oauth:true,kidDirectedSite:true});e.login(function(e){if(e.authResponse){r(e.authResponse.accessToken)}else{t(new u.KAError("Could not get FB access token",u.Errors.Internal))}},{scope:"email"})})})};r.getFacebookAuthToken=O},"m+8x":function(e,r,t){"use strict";t("pNMO");t("ma9I");t("yXV3");t("zKZe");t("5DmW");t("NBAS");Object.defineProperty(r,"__esModule",{value:true});r.default=void 0;var i=c(t("q1tI"));var n=o(t("wF1t"));var l=o(t("DiaA"));var f=t("vlHx");var p=o(t("RNI6"));var u=o(t("akNO"));var a=o(t("etw9"));var s=o(t("3atX"));function o(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};if(n.get||n.set){Object.defineProperty(r,t,n)}else{r[t]=e[t]}}}}r.default=e;return r}}function d(){d=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n)){e[n]=t[n]}}}return e};return d.apply(this,arguments)}function v(e,r){if(e==null)return{};var t=h(e,r);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){n=a[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function h(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,a;for(a=0;a<n.length;a++){o=n[a];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}function g(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function b(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function y(e,r,t){if(r)b(e.prototype,r);if(t)b(e,t);return e}function O(e,r){if(r&&(typeof r==="object"||typeof r==="function")){return r}return k(e)}function w(e){w=Object.setPrototypeOf?Object.getPrototypeOf:function e(r){return r.__proto__||Object.getPrototypeOf(r)};return w(e)}function k(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function C(e,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:true,configurable:true}});if(r)m(e,r)}function m(e,r){m=Object.setPrototypeOf||function e(r,t){r.__proto__=t;return r};return m(e,r)}function P(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var j=t("ZpD3");var i18n=t("HEOz");var E=function(e){C(o,e);function o(){var e;var c;g(this,o);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++){t[n]=arguments[n]}c=O(this,(e=w(o)).call.apply(e,[this].concat(t)));P(k(c),"handleClick",function(e){var r=c.props,t=r.postLoginContinueUrl,n=r.linkClever,o=r.role,a=r.classCodes,i=r.onReauthSuccess;e.preventDefault();if(c.props.minorConversions){j.markMinorConversions(c.props.minorConversions)}var u=i?true:false;var s=(0,p.default)({type:"facebook",role:o,linkClever:n,classCodes:a,continueUrl:t,reauth:u});if(u){l.default.tryFbLoad(function(){return(0,f.launchFacebookConnection)(s,i)})}else{(0,f.connectWithFacebook)(s,null)}});return c}y(o,[{key:"render",value:function e(){return i.createElement(a.default,{title:i18n._("Continue with Facebook"),iconComponent:s.default,disabled:this.props.disabled,onClick:this.handleClick,width:this.props.width,grow:this.props.grow,shrink:this.props.shrink,size:this.props.size})}}]);return o}(i.Component);var F=function e(r){var t=r.flag,n=r.flagLoading,o=r.flagError,a=v(r,["flag","flagLoading","flagError"]);if(t){return i.createElement(u.default,a)}return i.createElement(E,d({},a,{disabled:n}))};var I=(0,n.default)({name:"new_facebook_login"})(F);r.default=I}}]);
//# sourceMappingURL=../../sourcemaps/en/0d34bf12fb76c572651ecbab32690524.fa1bc98d0cd9666d860b.js.map